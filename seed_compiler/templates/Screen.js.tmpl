import React from 'react';
import { use{{ model.name }} } from '../models/{{ model.name }}';

export function {{ name }}() {
  const { items, create, update, remove } = use{{ model.name }}();

  return (
    <div>
      <h1>{{ name }}</h1>
      
      {/* Create Form */}
      <form onSubmit={e => {
        e.preventDefault();
        const formData = new FormData(e.target);
        create(Object.fromEntries(formData));
      }}>
        {% for field in model.fields %}
        <div>
          <label>{{ field.name }}</label>
          <input 
            name="{{ field.name }}"
            type="{{ field.type|input_type }}"
            {% if field.default %}defaultValue="{{ field.default }}"{% endif %}
          />
        </div>
        {% endfor %}
        <button type="submit">Create</button>
      </form>

      {/* List */}
      <div>
        {items.map(item => (
          <div key={item.id}>
            {% for field in model.fields %}
            <div>{item.{{ field.name }}}</div>
            {% endfor %}
            <button onClick={() => remove(item.id)}>Delete</button>
          </div>
        ))}
      </div>
    </div>
  );
}
